{% load static %}
<html>
<head>
    <title>
        Arrows.engineer
    </title>
    <meta charset="utf-8" name="viewport" content="width=device-width">
    <link rel="icon" href="{% static 'Basic_img/favicon.ico' %}" type="image/x-icon"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css_js/index.css' %}">
</head>
<body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <div class='row'>
        <div class="col-sm-1 col-md-2 col-lg-2 col-xl-3"></div>
        <div class="col-sm-10 col-md-8 col-lg-8 col-xl-6 col">
            {% include 'chat/navbar.html' %}
            <div class="card bg-light" id="GameBox">
                <div class="card-header">
                    <div class="progress" id="progressBar">
                        <div class="progress-bar  bg-danger" style="width: 100%;text-align: center;" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100">0</div>
                    </div>

                </div>
                <div class="card-body text-center" id='ParentQuestionBox'>
                    <div id="QuestionBox"></div>
                    <div id="AnswerBox">Your answer:</div>
                </div>
                <div class="card-footer">Engineers:<div id='UsersBox'></div></div>
            </div>
            {% include 'chat/market.html' %}
        </div>
        <div class="col-sm-1 col-md-2 col-lg-2 col-xl-3"></div>
    </div>
    <div class="row">
    <div class="col-4"></div>
    <div class="col-5">
    <table id="buttons">
        <tr>
            <td></td>
            <td>
                <img src="{% static 'Basic_img/first.png' %}" class="game-button" style="max-width:40;height: 40;transform: rotate(270deg); -webkit-transform: rotate(270deg);" id='up'>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>
                <img src="{% static 'Basic_img/first.png' %}" class="game-button" style="max-width:40;height: 40;transform: rotate(180deg); -webkit-transform: rotate(180deg);" id='left'>
            </td>
            <td></td>
            <td>
                <img src="{% static 'Basic_img/first.png' %}" class="game-button" style="max-width:40;height: 40;transform: rotate(0deg); -webkit-transform: rotate(0deg);" id='right'>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <img src="{% static 'Basic_img/first.png' %}" class="game-button" style="max-width:40;height: 40;transform: rotate(90deg); -webkit-transform: rotate(90deg);" id='down'>
            </td>
            <td></td>
        </tr>
    </table>
    </div>
    <div class="col-3"></div>
    </div>
    {% include 'chat/leaboard.html' %}
    <div class="modal fade" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
                <a href="{% url 'howtoplay' %}" target="_blank">
                    <input type="button" class="btn btn-info" value="How to play?">
                </a>
            </div>
            <div class="modal-body" id="myModalBody">
                <div id="Starter">
                    <div class="form-group">
                        <label for="user-name">Engineer name:</label>
                        <input type="text" class="form-control" id="user-name-text" value="{{ username }}">
                    </div>
                    <input type="button" class="btn btn-danger" id="market-button" value="Shop">
                    <input type="button" class="btn btn-primary" id="slow-button" value="Play slow">
                    <input type="button" class="btn btn-primary" id="fast-button" value="Play fast">
                </div>
                <div id="Continue">
                    <div class="d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                          <span class="sr-only">Loading...</span>
                        </div>
                      </div>
                    Please wait...
                </div>
            </div>
            <div class="modal-footer">
                <a href="https://iogames.space/" target="_blank">io games</a>
            </div>
          </div>
        </div>
    </div>
    <div class='modal fade' id='endModal'>

        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" id='endModalHeader'>

                </div>
                <div class="modal-body" id="endModalBody">

                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-primary" id="play-again-button" value="Play Again">
                </div>
            </div>
        </div>
    </div>
    <script>
    var photos = {
        "p1": "{% static 'Arrows/p1.png' %}",
        "p2": "{% static 'Arrows/p2.png' %}",
        "p3": "{% static 'Arrows/p3.png' %}",
        "p4": "{% static 'Arrows/p4.png' %}",
        "p5": "{% static 'Arrows/p5.png' %}",
        "p6": "{% static 'Arrows/p6.png' %}",
        "p7": "{% static 'Arrows/p7.png' %}",
        "p8": "{% static 'Arrows/p8.png' %}",
        "p9": "{% static 'Arrows/p9.png' %}",
        "p10": "{% static 'Arrows/p10.png' %}",
        "p11": "{% static 'Arrows/p11.png' %}",
        "p12": "{% static 'Arrows/p12.png' %}",
        "p13": "{% static 'Arrows/p13.png' %}",
        "p14": "{% static 'Arrows/p14.png' %}",
        "p15": "{% static 'Arrows/p15.png' %}",
        "p16": "{% static 'Arrows/p16.png' %}",
        "p17": "{% static 'Arrows/p17.png' %}",
        "p18": "{% static 'Arrows/p18.png' %}",
        "p19": "{% static 'Arrows/p19.png' %}",
        "p20": "{% static 'Arrows/p20.png' %}",
        "y1": "{% static 'Arrows/y1.png' %}",
        "y2": "{% static 'Arrows/y2.png' %}",
        "y3": "{% static 'Arrows/y3.png' %}",
        "y4": "{% static 'Arrows/y4.png' %}",
        "y5": "{% static 'Arrows/y5.png' %}",
        "y6": "{% static 'Arrows/y6.png' %}",
        "y7": "{% static 'Arrows/y7.png' %}",
        "y8": "{% static 'Arrows/y8.png' %}",
        "y9": "{% static 'Arrows/y9.png' %}",
        "y10": "{% static 'Arrows/y10.png' %}",
        "b1": "{% static 'Arrows/b1.png' %}",
        "b2": "{% static 'Arrows/b2.png' %}",
        "b3": "{% static 'Arrows/b3.png' %}",
        "b4": "{% static 'Arrows/b4.png' %}",
        "b5": "{% static 'Arrows/b5.png' %}",
        "b6": "{% static 'Arrows/b6.png' %}",
        "b7": "{% static 'Arrows/b7.png' %}",
        "b8": "{% static 'Arrows/b8.png' %}",
        "b9": "{% static 'Arrows/b9.png' %}",
        "b10": "{% static 'Arrows/b10.png' %}",
        "first": "{% static 'Basic_img/first.png' %}",
    };
    </script>
<script src="{% static 'css_js/index.js' %}"></script>
    <script>
    $(document).ready(function(){
        $('#Continue').hide()
        $('#MarketBox').hide()
        $('#ArrowBox').hide()
        $('#LeaboardBox').hide()
        $('#slow-button').click(function(){user_click("Slow");});
        $('#fast-button').click(function(){user_click("Fast");});
        $('#user-name-text').focus();
        $('#myModal').modal({backdrop:'static'});
        $('#up').click (function(){user_answer_change('W', '↑');});
        $('#down').click(function(){user_answer_change('S', '↓');});
        $('#right').click(function(){user_answer_change('D', '→');});
        $('#left').click(function(){user_answer_change('A', '←');});
        $('#market-button').click(function(){open_market();});
        $('#leaboard-button').click(function(){open_leaboard();});
        $('#play-again-button').click(function(){play_again();});
        $('#pink-button').click(function(){market_button_click("pink")});
        $('#yellow-button').click(function(){market_button_click("yellow")});
        $('#black-button').click(function(){market_button_click("black")});
        $('#buy').click(function(){buy_click();});
        $('#Return-Start').click(function(){market_return_click();});
        $('#Return-Box').click(function(){list_return_click();});
        $('#Arrow-list-button').click(function(){arrows_list();});
        $(window).blur(function(){leave_site();});
        $(window).keyup(function(e){
                if (e.keyCode === 38 || e.keyCode === 87){user_answer_change('W', '↑')}
                if (e.keyCode === 37 || e.keyCode === 65){user_answer_change('A', '←')}
                if (e.keyCode === 40 || e.keyCode === 83){user_answer_change('S', '↓')}
                if (e.keyCode === 39 || e.keyCode === 68){user_answer_change('D', '→')}
        });
        if (!sessionStorage.getItem("Money")){
            sessionStorage.setItem("Money", "50");
        }
        if (!sessionStorage.getItem("Multipler")){
            sessionStorage.setItem("Multipler", "1")
        }
        show_money();
        });
    leaboard_sckt.onopen = function(){
        leaboard_sckt.send(JSON.stringify({
        'type': 'join',
        'money': sessionStorage.getItem("Money"),
    }));
    }
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</body>
</html>